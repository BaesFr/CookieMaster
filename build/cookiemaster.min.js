function Beautify(a,b){var c=b||0;return CM.largeNumFormat(a,c)}Game.Logic=new Function("",Game.Logic.toString().replace("if (Game.T%(Game.fps*2)==0) document.title=Beautify(Game.cookies)+' '+(Game.cookies==1?'cookie':'cookies')+' - Cookie Clicker';","").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Audio=function(a){return-1===a.indexOf("soundjay")?new realAudio(a):(Game.Popup("Sorry, no sounds hotlinked from soundjay.com."),this.play=function(){},void 0)},CM={},CM.config={version:"1.1.1",cmGCAudioAlert:new Audio("http://www.freesound.org/data/previews/103/103236_829608-lq.mp3"),cmSPAudioAlert:new Audio("http://www.freesound.org/data/previews/121/121099_2193266-lq.mp3"),cmAudioGCNotified:!1,cmAudioSPNotified:!1,cmRefreshRate:1e3,cmFastRefreshRate:200,cmGCOverlay:null,ccURL:"http://orteil.dashnet.org/cookieclicker/",ccCompatibleVersions:["1.0402","1.0403"],ccBody:$("body"),ccWrapper:$("#wrapper"),ccGame:$("#game"),ccSectionLeft:$("#sectionLeft"),ccSectionMiddle:$("#sectionMiddle"),ccSectionRight:$("#sectionRight"),ccGoldenCookie:$("#goldenCookie"),ccSeasonPopup:$("#seasonPopup"),cmStatsTable:{},settings:{cleanUI:{label:"Clean UI",desc:"Hide the top bar, and make other small graphical enhancements to the game interface",options:"toggle",current:"on"},showTimers:{label:"Show Timers",desc:"Display countdown timers for game events and buffs",options:"toggle",current:"on"},audioAlerts:{label:"Audio Alerts",desc:"Play an audio alert and flash the screen when Golden Cookies and Reindeer spawn",options:"toggle",current:"on"},numFormat:{label:"Number Formatting",desc:"Sets the desired decimal and thousands separator symbols for numbers",options:[{label:"1,234.56",value:"us"},{label:"1.234,56",value:"eu"}],current:"us"},shortNums:{label:"Short Numbers",desc:"Shorten large numbers with suffixes",options:"toggle",current:"on"},suffixFormat:{label:"Suffix Type",desc:"Set the number suffixes to desired type",options:[{label:"Mathematical",value:"math"},{label:"SI",value:"si"},{label:"Standard",value:"standard"}],current:"math"},changeFont:{label:"Font",desc:"Set the highlight font",options:[{label:"Kavoon (default)",value:"default"},{label:"Serif",value:"serif"},{label:"Sans Serif",value:"sansserif"}],current:"default"}}},CM.init=function(){{var a=this,b=this.config.cmRefreshRate,c=this.config.cmFastRefreshRate;this.config.cmCSS,this.config.cmStyleID}return this.integrityCheck()?(this.loadUserSettings(),this.attachSettingsPanel(),this.attachStatsPanel(),this.applyUserSettings(),setInterval(function(){a.mainLoop()},b),setInterval(function(){a.updateTitleTicker(),"on"===a.config.settings.audioAlerts.current&&a.audioAlerts()},c),Game.Popup("CookieMaster v."+this.config.version+" loaded successfully!"),void 0):(this.suicide(),!1)},CM.integrityCheck=function(){var a=Game.version.toString(),b=!1,c=!1;return-1===document.location.href.indexOf(this.config.ccURL)?(b="Error: This isn't the Cookie Clicker URL!",c=!0):window.jQuery?Game||(b="Error: Cookie Clicker does not appear to be initialized!",c=!0):(b="Error: jQuery is not loaded!",c=!0),-1===this.compatibilityCheck(a)&&(b="Warning: This version of Cookie Clicker may not be fully supported!"),(0===Game.seasonPopup.maxTime||0===Game.goldenCookie.maxTime)&&(b="Warning: New/unsaved game detected.\n\nGolden cookies and reindeer will not spawn until you manually save and refresh Cookie Clicker.\n\nThis is a bug in the game, not CookieMaster ;)"),b&&this.alertMessage(b),c?!1:!0},CM.compatibilityCheck=function(a){var b,c=this.config.ccCompatibleVersions;for(b=0;b<c.length;b++)if(c[b].match(a))return b;return-1},CM.largeNumFormat=function(a,b){var c,d="on"===this.config.settings.shortNums.current?!0:!1,e=this.config.settings.suffixFormat.current,f="us"===this.config.settings.numFormat.current?".":",",g="."===f?".":",",h="."===f?",":".",i=b||0,j=[{divider:1e24,suffix:{math:"Sp",si:"Y",standard:"septillion"}},{divider:1e21,suffix:{math:"Sx",si:"Z",standard:"sextillion"}},{divider:1e18,suffix:{math:"Qi",si:"E",standard:"quintillion"}},{divider:1e15,suffix:{math:"Qa",si:"P",standard:"quadrillion"}},{divider:1e12,suffix:{math:"T",si:"T",standard:"trillion"}},{divider:1e9,suffix:{math:"B",si:"G",standard:"billion"}},{divider:1e6,suffix:{math:"M",si:"M",standard:"million"}}];if(a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)return"Infinity";if(d)for(var k=0;k<j.length;k++)if(a>=j[k].divider)return a=(a/j[k].divider).toFixed(3)+" "+j[k].suffix[e],a.replace(".",g);return a=Math.round(a*Math.pow(10,i))/Math.pow(10,i),c=a.toString().split("."),c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,h),c.join(g)},CM.Timer=function(a,b){this.type=a,this.label=b,this.id="CMTimer-"+this.type,this.container={},this.barOuter={},this.barInner={},this.limiter={},this.counter={},this.create=function(){var a,b=this.getTimings(),c=$("<div />").attr({"class":"cmTimerContainer cf cmTimer-"+this.type,id:this.id}),d=$("<div />").addClass("cmTimer"),e=$("<div />"),f=$("<div />").addClass("cmTimerLabel").text(this.label),g=$("<div />").addClass("cmTimerCounter").text(Math.round(b.minCurrent)+"s"),h={},i=b.minCurrent/b.max*100;return b.hasOwnProperty("min")&&b.min>0&&(a=b.min/b.max*100,100-a>i&&c.addClass("cmEmphasize"),h=$("<span />").css("width",a+"%"),d.append(h)),e.css("width",i+"%"),d.append(e),c.append(f,d,g),this.container=c,this.barOuter=d,this.barInner=e,this.limiter=h,this.counter=g,c},this.update=function(){var a,b=this.getTimings(),c=b.minCurrent/b.max*100;return b.hasOwnProperty("min")&&b.min>0&&(a=b.min/b.max*100,this.limiter.css("width",a+"%"),100-a>c?(this.limiter.fadeOut(500),this.container.hasClass("cmEmphasize")||this.container.addClass("cmEmphasize")):(this.limiter.show(),this.container.removeClass("cmEmphasize"))),this.barInner.css("width",c+"%"),this.counter.text(Math.round(b.minCurrent)+"s"),this},this.getTimings=function(){var a={},b=Game.Has("Get lucky");return"reindeer"===this.type?(a.min=Game.seasonPopup.minTime/Game.fps,a.minCurrent=(Game.seasonPopup.maxTime-Game.seasonPopup.time)/Game.fps,a.max=Game.seasonPopup.maxTime/Game.fps):"goldenCookie"===this.type?(a.min=Game.goldenCookie.minTime/Game.fps,a.minCurrent=(Game.goldenCookie.maxTime-Game.goldenCookie.time)/Game.fps,a.max=Game.goldenCookie.maxTime/Game.fps):"frenzy"===this.type?(a.minCurrent=Game.frenzy/Game.fps,a.max=77+77*b):"clickFrenzy"===this.type?(a.minCurrent=Game.clickFrenzy/Game.fps,a.max=13+13*b):"elderFrenzy"===this.type?(a.minCurrent=Game.frenzy/Game.fps,a.max=6+6*b):"clot"===this.type&&(a.minCurrent=Game.frenzy/Game.fps,a.max=66+66*b),a},this.show=function(){if(this.container.is(":hidden")){var a=this.container.children();a.css("opacity",0),this.container.slideDown(200,function(){a.animate({opacity:1},200)})}return this},this.hide=function(){if(this.container.is(":visible")){var a=this.container;this.container.children().animate({opacity:0},200,function(){a.slideUp(200)})}return this}},CM.getHCStats=function(){function a(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)}function b(a){return 5*Math.pow(10,11)*a*(a+1)}var c=[],d=Game.prestige["Heavenly chips"],e=2*d,f=a(Game.cookiesReset+Game.cookiesEarned),g=2*f,h=b(f+1)-(Game.cookiesReset+Game.cookiesEarned),i=Math.round(h/Game.cookiesPs);return c=[Beautify(d),Beautify(e)+"%",Beautify(f),Beautify(g)+"%",Beautify(h),this.secondsToTime(i)]},CM.getLuckyStats=function(){function a(a){var b,c=Game.cookiesPs;return Game.frenzy>0&&(c/=Game.frenzyPower),"luckyFrenzy"===a&&(c=7*c),b=Math.round((1200*c+13)/.1),b<=Game.cookies?'<span class="cmHighlight">'+Beautify(b)+"</span>":Beautify(b)}function b(a){var b=Game.cookiesPs;Game.frenzy>0&&"cur"!=a&&(b/=Game.frenzyPower),"maxFrenzy"==a&&(b=7*b);var c=[Math.round(1200*b+13),Math.round(.1*Game.cookies+13)];return("max"==a||"maxFrenzy"==a)&&Math.round((1200*b+13)/.1)>Game.cookies?Beautify(c[0]):Beautify(Math.min.apply(Math,c))}var c=[];return c[0]=a("lucky"),c[1]=a("luckyFrenzy"),c[2]=b("max"),c[3]=b("maxFrenzy"),c[4]=b("cur"),c},CM.getWrinklerStats=function(){var a=[],b=0;return $.each(Game.wrinklers,function(){b+=this.sucked}),a[0]=Beautify(b),a[1]=Beautify(1.1*b),a},CM.secondsToTime=function(a){var b,c,d="",e=a;return c=Math.floor(e/3600),e-=3600*c,b=Math.floor(e/60),e-=60*b,d+=c>0?c+" hours, ":"",d+=b>0?b+" minutes, ":"",d+=e>0?e+" seconds":""},CM.mainLoop=function(){var a=1===$("#CMTimerPanel").length;a&&this.updateTimers(),this.updateStats()},CM.attachSettingsPanel=function(){var a=this,b=[],c=[],d=[],e="",f="",g="",h=this.config.settings,i=this.config.ccWrapper,j=$("<div />").attr("id","CMSettingsPanel"),k=$("<div />").attr("id","CMSettingsPanelHandle").text("CookieMaster Settings"),l=$("<ul />").attr("id","CMSettingsList"),m=$("<button />").attr({id:"CMSettingsSave",type:"button"}).text("Apply Settings");$cmSettingsPauseButton=$("<button />").attr({id:"CMSettingsPause",type:"button"}).text("Pause Game"),$.each(h,function(a){c=[],e=this.current,"object"==typeof this.options?($.each(this.options,function(){f=e===this.toString()?' selected="selected"':"",c.push('<option value="'+this.value+'"'+f+">"+this.label+"</option>")}),d='<select id="CMsetting-'+a+'">',d+=c.join(""),d+="</select>",l.on("change",".setting-"+a+" select",function(){h[a].current=$(this).find(":selected").val()})):"toggle"===this.options&&(f="on"===e?' checked="checked"':"",d='<input type="checkbox" id="CMsetting'+a+'"'+f+" />",l.on("change",".setting-"+a+" input",function(){h[a].current=$(this).prop("checked")?"on":"off"})),g='<li class="cf setting setting-'+a+'" title="'+this.desc+'"">',g+='<label for="CMsetting'+a+'">'+this.label+d+"</label>",g+="</li>",b.push(g)}),l.append(b.join("")),j.append(k,l,m,$cmSettingsPauseButton),i.append(j),k.click(function(){$(this).hasClass("cmOpen")?j.animate({"margin-bottom":"-"+j.outerHeight()+"px"},300,function(){k.removeClass("cmOpen").text("CookieMaster Settings")}):j.animate({"margin-bottom":"0"},300,function(){k.addClass("cmOpen").text("Close Settings")})}),m.click(function(){a.saveUserSettings(),a.applyUserSettings()}),$cmSettingsPauseButton.click(function(){alert("Game paused. Click OK to resume.")})},CM.attachStatsPanel=function(){var a=this.config.ccWrapper,b=$("<div />").attr("id","CMStatsPanel"),c=$("<div />").attr("id","CMStatsPanelHandle").text("CookieMaster Stats"),d="";d+='<table id="CMStatsPanelTable">',d+="<tr>",d+="<td>Max Lucky required:</td>",d+='<td class="cmStatsValue" id="CMStatsLuckyRequired"></td>',d+="</tr>",d+="<tr>",d+="<td>Max Lucky + Frenzy required:</td>",d+='<td class="cmStatsValue" id="CMStatsLuckyFrenzyRequired"></td>',d+="</tr>",d+="<tr>",d+="<td>Max Lucky reward:</td>",d+='<td class="cmStatsValue" id="CMStatsMaxLuckyReward"></td>',d+="</tr>",d+="<tr>",d+="<td>Max Lucky + Frenzy reward:</td>",d+='<td class="cmStatsValue" id="CMStatsMaxLuckyFrenzyReward"></td>',d+="</tr>",d+="<tr>",d+="<td>Current Lucky reward:</td>",d+='<td class="cmStatsValue" id="CMStatsCurrentLuckyReward"></td>',d+="</tr>",d+='<tr><td colspan="2">&nbsp;</td></tr>',d+="<tr>",d+="<td>Current Heavenly Chips:</td>",d+='<td class="cmStatsValue" id="CMStatsHCCurrent"></td>',d+="</tr>",d+="<tr>",d+="<td>Max Heavenly Chips:</td>",d+='<td class="cmStatsValue" id="CMStatsHCMax"></td>',d+="</tr>",d+="<tr>",d+="<td>Cookies to next HC:</td>",d+='<td class="cmStatsValue" id="CMStatsHCCookiesToNext"></td>',d+="</tr>",d+="<tr>",d+="<td>Time to next HC:</td>",d+='<td class="cmStatsValue" id="CMStatsHCTimeToNext"></td>',d+="</tr>",d+='<tr><td colspan="2">&nbsp;</td></tr>',d+="<tr>",d+="<td>Cookies sucked by Wrinklers:</td>",d+='<td class="cmStatsValue" id="CMStatsWrinklersSucked"></td>',d+="</tr>",d+="<tr>",d+="<td>Reward for popping Wrinklers:</td>",d+='<td class="cmStatsValue" id="CMStatsWrinklersReward"></td>',d+="</tr>",d+="</table>",$cmStatsPanelTable=$(d),this.config.cmStatsTable=$cmStatsPanelTable,b.append(c,$cmStatsPanelTable),a.append(b),c.click(function(){$(this).hasClass("cmOpen")?b.animate({"margin-bottom":"-"+b.outerHeight()+"px"},250,function(){c.removeClass("cmOpen").text("CookieMaster Stats")}):b.animate({"margin-bottom":"0"},250,function(){c.addClass("cmOpen").text("Close Stats")})})},CM.updateStats=function(){var a=this.getHCStats(),b=this.getLuckyStats(),c=this.getWrinklerStats();$("#CMStatsLuckyRequired").html(b[0]),$("#CMStatsLuckyFrenzyRequired").html(b[1]),$("#CMStatsMaxLuckyReward").html(b[2]),$("#CMStatsMaxLuckyFrenzyReward").html(b[3]),$("#CMStatsCurrentLuckyReward").html(b[4]),$("#CMStatsHCCurrent").html(a[0]+" ("+a[1]+")"),$("#CMStatsHCMax").html(a[2]+" ("+a[3]+")"),$("#CMStatsHCCookiesToNext").html(a[4]),$("#CMStatsHCTimeToNext").html(a[5]),$("#CMStatsWrinklersSucked").html(c[0]),$("#CMStatsWrinklersReward").html(c[1])},CM.timerPanel=function(a){var b=$("<div />").attr("id","CMTimerPanel"),c=(this.config.cmTimerResolution,this.config.ccSectionLeft);a?0===$("#CMTimerPanel").length&&(this.gcTimer=new CM.Timer("goldenCookie","Next Cookie:"),this.reindeerTimer=new CM.Timer("reindeer","Next Reindeer:"),this.frenzyTimer=new CM.Timer("frenzy","Frenzy:"),this.clickFrenzyTimer=new CM.Timer("clickFrenzy","Click Frenzy:"),this.elderFrenzyTimer=new CM.Timer("elderFrenzy","Elder Frenzy:"),this.clotTimer=new CM.Timer("clot","Clot:"),b.append(this.gcTimer.create(),this.reindeerTimer.create(),this.frenzyTimer.create(),this.elderFrenzyTimer.create(),this.clotTimer.create(),this.clickFrenzyTimer.create()),c.append(b),this.displayGCTimer(),this.config.cmGCOverlay.click(function(){Game.goldenCookie.click(),$("#CMGCOverlay").hide()})):0!==$("#CMTimerPanel").length&&(this.gcTimer=null,this.reindeerTimer=null,this.frenzyTimer=null,this.clickFrenzyTimer=null,this.elderFrenzyTimer=null,this.clotTimer=null,this.config.cmGCOverlay.remove(),$("#CMTimerPanel").remove())},CM.updateTimers=function(){this.displayGCTimer(),$("#goldenCookie").is(":hidden")?(this.gcTimer.update(),this.gcTimer.show()):this.gcTimer.hide(),$("#seasonPopup").is(":hidden")?(this.reindeerTimer.update(),this.reindeerTimer.show()):this.reindeerTimer.hide(),Game.frenzy>0&&7===Game.frenzyPower?(this.frenzyTimer.update(),this.frenzyTimer.show(),this.elderFrenzyTimer.hide(),this.clotTimer.hide()):this.frenzyTimer.hide(),Game.clickFrenzy>0?(this.clickFrenzyTimer.update(),this.clickFrenzyTimer.show()):this.clickFrenzyTimer.hide(),Game.frenzy>0&&666===Game.frenzyPower?(this.elderFrenzyTimer.update(),this.elderFrenzyTimer.show(),this.frenzyTimer.hide(),this.clotTimer.hide()):this.elderFrenzyTimer.hide(),Game.frenzy>0&&.5===Game.frenzyPower?(this.clotTimer.update(),this.clotTimer.show(),this.frenzyTimer.hide(),this.elderFrenzyTimer.hide()):this.clotTimer.hide()},CM.displayGCTimer=function(){var a=this.config.ccGoldenCookie,b=this.config.cmGCOverlay||$("<div />").attr("id","CMGCOverlay").appendTo(this.config.ccGame),c=Math.round(Game.goldenCookie.life/Game.fps);this.config.cmGCOverlay=b,a.is(":visible")?(0===$("#CMGCOverlay").length&&b.appendTo(this.config.ccGame),b.css({top:a.css("top"),left:a.css("left"),opacity:a.css("opacity")}).text(c).show()):b.hide()},CM.audioAlerts=function(){var a=this.config.ccGoldenCookie,b=this.config.ccSeasonPopup,c=this.config.cmGCAudioAlert,d=this.config.cmSPAudioAlert,e=this.config.cmAudioGCNotified,f=this.config.cmAudioSPNotified;0===$("#CMOverlay").length&&$("body").append($("<div />").attr("id","CMOverlay")),a.is(":visible")?e||(c.volume=1,c.play(),$("#CMOverlay").show().fadeOut(500),this.config.cmAudioGCNotified=!0):this.config.cmAudioGCNotified=!1,b.is(":visible")?f||(d.volume=1,d.play(),$("#CMOverlay").show().fadeOut(500),this.config.cmAudioSPNotified=!0):this.config.cmAudioSPNotified=!1},CM.updateTitleTicker=function(){var a=Game.seasonPopup.life>0?"R":Math.round((Game.seasonPopup.maxTime-Game.seasonPopup.time)/Game.fps),b=Game.goldenCookie.life>0?"G":Math.round((Game.goldenCookie.maxTime-Game.goldenCookie.time)/Game.fps),c=Beautify(Game.cookies);document.title=b+" | "+a+" - "+c+" cookies"},CM.cleanUI=function(a){function b(){Game.Background.canvas.width=Game.Background.canvas.parentNode.offsetWidth,Game.Background.canvas.height=Game.Background.canvas.parentNode.offsetHeight,Game.LeftBackground.canvas.width=Game.LeftBackground.canvas.parentNode.offsetWidth,Game.LeftBackground.canvas.height=Game.LeftBackground.canvas.parentNode.offsetHeight}var c="cleanUI",d=this.config.ccBody;a?d.addClass(c):d.removeClass(c),setTimeout(b,1e3)},CM.changeFont=function(a){var b=this.config.ccBody;b.removeClass("serif sansserif"),"default"!==a&&b.addClass(a)},CM.applyUserSettings=function(){var a=this.config.settings;this.cleanUI("on"===a.cleanUI.current),this.changeFont(a.changeFont.current),this.timerPanel("on"===a.showTimers.current),Game.RebuildStore(),Game.RebuildUpgrades()},CM.saveUserSettings=function(){var a=this.config.settings,b={},c="",d=new Date;$.each(a,function(a){b[a]=this.current}),c=$.param(b).replace(/=/g,":").replace(/&/g,"|"),d.setFullYear(d.getFullYear()+1),document.cookie="CMSettings="+c+";expires="+d.toGMTString()+";",-1===document.cookie.indexOf("CMSettings")?Game.Popup("Error: Could not save settings!"):Game.Popup("Settings saved successfully!")},CM.loadUserSettings=function(){var a=this.config.settings,b=document.cookie.replace(/(?:(?:^|.*;\s*)CMSettings\s*\=\s*([^;]*).*$)|^.*$/,"$1"),c=[],d=[];b&&(c=b.split("|"),$.each(c,function(){d=this.split(":"),a.hasOwnProperty(d[0])&&(a[d[0]].current=d[1])}))},CM.suicide=function(){alert("This kills the CookieMaster.")},CM.alertMessage=function(a){alert(a)},CM.init();