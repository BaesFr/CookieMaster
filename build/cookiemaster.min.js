function Beautify(a,b){var c=b||0;return CM.largeNumFormat(a,c)}var CM={};CM.config={version:"1.3.1",cmGCAudioAlertURL:"http://www.freesound.org/data/previews/103/103236_829608-lq.mp3",cmSPAudioAlertURL:"http://www.freesound.org/data/previews/121/121099_2193266-lq.mp3",cmGCAudioObject:null,cmSPAudioObject:null,cmAudioGCNotified:!1,cmAudioSPNotified:!1,cmVisualGCNotified:!1,cmVisualSPNotified:!1,cmRefreshRate:1e3,cmFastRefreshRate:200,ccURL:"http://orteil.dashnet.org/cookieclicker/",ccCompatibleVersions:["1.0402","1.0403"],ccBody:$("body"),ccWrapper:$("#wrapper"),ccGame:$("#game"),ccSectionLeft:$("#sectionLeft"),ccSectionMiddle:$("#sectionMiddle"),ccSectionRight:$("#sectionRight"),ccComments:$("#comments"),ccGoldenCookie:$("#goldenCookie"),ccSeasonPopup:$("#seasonPopup"),cmTimerPanel:null,cmSettingsPanel:null,cmStatsPanel:null,cmStatsTable:null,cmOverlay:null,cmGCOverlay:null,settings:{cleanUI:{type:"checkbox",label:"Clean Interface:",desc:"Hide the top bar, and make other small graphical enhancements to the game interface",current:"on"},showTimers:{type:"checkbox",label:"Show Timers:",desc:"Display countdown timers for game events and buffs",current:"on"},timerBarPosition:{type:"select",label:"Timer Bar Position:",desc:"Position the timer bar at the top or bottom of the screen",options:[{label:"Top",value:"top"},{label:"Bottom",value:"bottom"}],current:"bottom"},audioAlerts:{type:"select",label:"Audio Alerts:",desc:"Play an audio alert when Golden Cookies and Reindeer spawn",options:[{label:"Off",value:"off"},{label:"Golden Cookie",value:"gc"},{label:"Reindeer",value:"sp"},{label:"All",value:"all"}],current:"all"},visualAlerts:{type:"select",label:"Visual Alerts:",desc:"Flash the screen when Golden Cookies and Reindeer spawn",options:[{label:"Off",value:"off"},{label:"Golden Cookie",value:"gc"},{label:"Reindeer",value:"sp"},{label:"All",value:"all"}],current:"all"},numFormat:{type:"select",label:"Number Formatting:",desc:"Sets the desired decimal and thousands separator symbols for numbers",options:[{label:"1,234.56",value:"us"},{label:"1.234,56",value:"eu"}],current:"us"},shortNums:{type:"checkbox",label:"Short Numbers:",desc:"Shorten large numbers with suffixes",current:"on"},suffixFormat:{type:"select",label:"Suffix Type:",desc:"Set the number suffixes to desired type",options:[{label:"Mathematical",value:"math"},{label:"SI",value:"si"},{label:"Standard",value:"standard"}],current:"math"},changeFont:{type:"select",label:"Font:",desc:"Set the highlight font",options:[{label:"Kavoon (default)",value:"default"},{label:"Serif",value:"serif"},{label:"Sans Serif",value:"sansserif"}],current:"default"},autoClick:{type:"checkbox",label:"Auto-click Big Cookie:",desc:"Automatically click the big cookie",current:"off"},autoClickSpeed:{type:"range",label:"Auto-click Speed:",desc:"How many times per second to auto-click the big cookie",options:{min:1,max:100,step:1},current:10}}},CM.init=function(){var a=this,b=this.config.cmRefreshRate,c=this.config.cmFastRefreshRate;return this.config.cmGCAudioObject=new Audio(this.config.cmGCAudioAlertURL),this.config.cmSPAudioObject=new Audio(this.config.cmSPAudioAlertURL),this.integrityCheck()?(this.loadUserSettings(),this.attachSettingsPanel(),this.attachStatsPanel(),this.AddPopWrinklersButton(),this.setEvents(),this.applyUserSettings(),setInterval(function(){a.mainLoop()},b),setInterval(function(){a.updateTitleTicker(),"off"!==a.config.settings.audioAlerts.current&&a.playAudioAlerts()},c),this.popup("CookieMaster v."+this.config.version+" loaded successfully!"),void 0):(this.suicide(),!1)},CM.integrityCheck=function(){var a=Game.version.toString(),b=!1;return-1===document.location.href.indexOf(this.config.ccURL)?(this.alertMessage("Error: This isn't the Cookie Clicker URL!"),b=!0):window.jQuery?Game||(this.alertMessage("Error: Cookie Clicker does not appear to be initialized!"),b=!0):(this.alertMessage("Error: jQuery is not loaded!"),b=!0),-1===this.compatibilityCheck(a)&&this.alertMessage("Warning: CookieMaster has not been tested on this version of Cookie Clicker. Continue at your own peril!"),(0===Game.seasonPopup.maxTime||0===Game.goldenCookie.maxTime)&&this.alertMessage("Warning: New or unsaved game detected.\n\nGolden cookies and reindeer will not spawn until you manually save and refresh Cookie Clicker.\n\nThis is a bug in the game, not CookieMaster ;)"),b?!1:!0},CM.compatibilityCheck=function(a){var b,c=this.config.ccCompatibleVersions;for(b=0;b<c.length;b++)if(c[b].match(a))return b;return-1},CM.largeNumFormat=function(a,b){var c,d,e="on"===this.config.settings.shortNums.current?!0:!1,f=this.config.settings.suffixFormat.current,g="us"===this.config.settings.numFormat.current?".":",",h="."===g?".":",",i="."===g?",":".",j=b||0,k=[{divider:1e24,suffix:{math:"Sp",si:"Y",standard:"septillion"}},{divider:1e21,suffix:{math:"Sx",si:"Z",standard:"sextillion"}},{divider:1e18,suffix:{math:"Qi",si:"E",standard:"quintillion"}},{divider:1e15,suffix:{math:"Qa",si:"P",standard:"quadrillion"}},{divider:1e12,suffix:{math:"T",si:"T",standard:"trillion"}},{divider:1e9,suffix:{math:"B",si:"G",standard:"billion"}},{divider:1e6,suffix:{math:"M",si:"M",standard:"million"}}];if(a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)return"Infinity";if(e)for(d=0;d<k.length;d++)if(a>=k[d].divider)return a=Math.floor(a/k[d].divider*1e3)/1e3+" "+k[d].suffix[f],a.replace(".",h);return a=Math.round(a*Math.pow(10,j))/Math.pow(10,j),c=a.toString().split("."),c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,i),c.join(h)},CM.Timer=function(a,b){this.type=a,this.label=b,this.id="CMTimer-"+this.type,this.container={},this.barOuter={},this.barInner={},this.limiter={},this.counter={},this.create=function(){var a,b=this.getTimings(),c=$("<div />").attr({"class":"cmTimerContainer cf cmTimer-"+this.type,id:this.id}),d=$("<div />").addClass("cmTimer"),e=$("<div />"),f=$("<div />").addClass("cmTimerLabel").text(this.label),g=$("<div />").addClass("cmTimerCounter").text(Math.round(b.minCurrent)),h={},i=b.minCurrent/b.max*100;return b.hasOwnProperty("min")&&b.min>0&&(a=b.min/b.max*100,100-a>i&&c.addClass("cmEmphasize"),h=$("<span />").css("width",a+"%"),d.append(h)),e.css("width",i+"%"),d.append(e),c.append(f,d,g),this.container=c,this.barOuter=d,this.barInner=e,this.limiter=h,this.counter=g,c},this.update=function(){var a,b=this.getTimings(),c=b.minCurrent/b.max*100;return b.hasOwnProperty("min")&&b.min>0&&(a=b.min/b.max*100,this.limiter.css("width",a+"%"),100-a>c?(this.limiter.fadeOut(500),this.container.addClass("cmEmphasize")):(this.limiter.show(),this.container.removeClass("cmEmphasize"))),this.barInner.css("width",c+"%"),this.counter.text(Math.round(b.minCurrent)),this},this.getTimings=function(){var a={},b=Game.Has("Get lucky");return"reindeer"===this.type?(a.min=Game.seasonPopup.minTime/Game.fps,a.minCurrent=(Game.seasonPopup.maxTime-Game.seasonPopup.time)/Game.fps,a.max=Game.seasonPopup.maxTime/Game.fps):"goldenCookie"===this.type?(a.min=Game.goldenCookie.minTime/Game.fps,a.minCurrent=(Game.goldenCookie.maxTime-Game.goldenCookie.time)/Game.fps,a.max=Game.goldenCookie.maxTime/Game.fps):"frenzy"===this.type?(a.minCurrent=Game.frenzy/Game.fps,a.max=77+77*b):"clickFrenzy"===this.type?(a.minCurrent=Game.clickFrenzy/Game.fps,a.max=13+13*b):"elderFrenzy"===this.type?(a.minCurrent=Game.frenzy/Game.fps,a.max=6+6*b):"clot"===this.type&&(a.minCurrent=Game.frenzy/Game.fps,a.max=66+66*b),a},this.show=function(){if(this.container.is(":hidden")){var a=this.container.children();a.css("opacity",0),this.container.slideDown(200,function(){a.animate({opacity:1},200)})}return this},this.hide=function(){if(this.container.is(":visible")){var a=this.container;this.container.children().animate({opacity:0},200,function(){a.slideUp(200)})}return this}},CM.getHCStats=function(){function a(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)}function b(a){return 5*Math.pow(10,11)*a*(a+1)}var c=[],d=Game.prestige["Heavenly chips"],e=2*d,f=a(Game.cookiesReset+Game.cookiesEarned),g=2*f,h=b(f+1)-(Game.cookiesReset+Game.cookiesEarned),i=Math.round(h/Game.cookiesPs);return c=[Beautify(d),Beautify(e)+"%",Beautify(f),Beautify(g)+"%",Beautify(h),this.formatTime(i)]},CM.baseCps=function(){var a=Game.frenzy>0?Game.frenzyPower:1;return Game.cookiesPs/a},CM.luckyBank=function(){return 1200*this.baseCps()*10+13},CM.luckyFrenzyBank=function(){return 1200*this.baseCps()*10*7+13},CM.maxLuckyReward=function(){return 1200*this.baseCps()+13},CM.maxLuckyFrenzyReward=function(){return 1200*this.baseCps()*7+13},CM.luckyReward=function(){return Math.min(10*Game.cookies+13,1200*this.baseCps()+13)},CM.luckyFrenzyReward=function(){return Math.min(10*Game.cookies+13,1200*this.baseCps()*7+13)},CM.getWrinklerStats=function(){var a=[],b=0,c=1.1;return $.each(Game.wrinklers,function(){b+=this.sucked}),a[0]=Beautify(b),a[1]=Beautify(b*c),a},CM.formatTime=function(a){var b=[" day, "," hour, "," minute, "," second"],c=parseInt(a/86400)%999,d=parseInt(a/3600)%24,e=parseInt(a/60)%60,f=a%60,g="";return 1/0===a?"Never":0===a?"Done!":a/86400>1e3?"> 1,000 days":(c>1&&(b[0]=" days, "),d>1&&(b[1]=" hours, "),e>1&&(b[2]=" minutes, "),f>1&&(b[3]=" seconds"),f&&(g=f+b[3]),e&&(g=e+b[2]+g),d&&(g=d+b[1]+g),c&&(g=c+b[0]+g),g)},CM.wrinklersExist=function(){var a,b=!1;for(a in Game.wrinklers)Game.wrinklers[a].phase>0&&(b=!0);return b},CM.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},CM.popup=function(a){return Game.Popup('<span class="cmPopupText">'+a+"</span>")},CM.mainLoop=function(){var a=this.config.settings;"on"===a.showTimers.current&&$("#CMTimerPanel").length&&this.updateTimers(),"off"!==a.visualAlerts.current&&this.showVisualAlerts(),this.config.cmStatsPanel.is(":visible")&&this.updateStats()},CM.attachSettingsPanel=function(){var a=this,b=[],c=[],d=[],e="",f="",g="",h=this.config.settings,i=this.config.ccSectionMiddle,j=this.config.ccComments,k=$("<div />").attr("id","CMSettingsPanel"),l=$("<div />").attr({id:"CMSettingsPanelButton","class":"button"}).text("Settings"),m=$("<h3 />").attr("class","title").text("CookieMaster Settings"),n=$("<table />").attr({id:"CMSettingsTable","class":"cmTable"}),o=$("<button />").attr({id:"CMSettingsSave",type:"button","class":"cmFont"}).text("Apply Settings"),p=$("<button />").attr({id:"CMSettingsPause",type:"button","class":"cmFont"}).text("Pause Game");$.each(h,function(a){c=[],e=this.current,"select"===this.type?($.each(this.options,function(){f=e===this.value.toString()?' selected="selected"':"",c.push('<option value="'+this.value+'"'+f+">"+this.label+"</option>")}),d='<select id="CMSetting-'+a+'">',d+=c.join(""),d+="</select>",n.on("change",".setting-"+a+" select",function(){h[a].current=$(this).find(":selected").val()})):"checkbox"===this.type?(f="on"===e?' checked="checked"':"",d='<input type="checkbox" id="CMSetting-'+a+'"'+f+" />",n.on("change",".setting-"+a+" input",function(){h[a].current=$(this).prop("checked")?"on":"off"})):"range"===this.type&&(d='<span class="currentValue">'+this.current+"</span>",d+='<input type="range" value="'+this.current+'" min="'+this.options.min+'" max="'+this.options.max+'" step="'+this.options.step+'" id="CMSetting-'+a+'" />',n.on("change",".setting-"+a+" input",function(){$(this).siblings(".currentValue").text($(this).val()),h[a].current=$(this).val()})),g='<tr class="setting setting-'+a+'">',g+="<td>",g+='<label for="CMSetting-'+a+'">'+this.label+"</label>",g+="<small>"+this.desc+"</small>",g+="</td>",g+='<td class="cmValue">'+d+"</td>",g+="</tr>",b.push(g)}),n.append(b.join("")),k.append(m,n,o,p),i.append(k),j.prepend(l),this.config.cmSettingsPanel=k,o.click(function(){a.saveUserSettings(),a.applyUserSettings()}),p.click(function(){alert("Game paused. Click OK to resume.")})},CM.attachStatsPanel=function(){var a=this.config.ccSectionMiddle,b=this.config.ccComments,c=$("<div />").attr("id","CMStatsPanel"),d=$("<h3 />").attr("class","title").text("CookieMaster Statistics"),e=$("<div />").attr({id:"CMStatsPanelButton","class":"button"}).text("Stats +"),f={},g="";g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconLucky"></span>Lucky and Frenzy Rewards</th>',g+="</tr>",g+="<tr>",g+="<td>Lucky bank required:</td>",g+='<td class="cmValue" id="CMStatsLuckyRequired"></td>',g+="</tr>",g+="<tr>",g+="<td>Lucky + Frenzy bank required:</td>",g+='<td class="cmValue" id="CMStatsLuckyFrenzyRequired"></td>',g+="</tr>",g+="<tr>",g+="<td>Lucky reward:</td>",g+='<td class="cmValue" id="CMStatsLuckyReward"></td>',g+="</tr>",g+="<tr>",g+="<td>Lucky + Frenzy reward:</td>",g+='<td class="cmValue" id="CMStatsLuckyFrenzyReward"></td>',g+="</tr>",g+="</table>",g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconHC"></span>Heavenly Chips</th>',g+="</tr>",g+="<tr>",g+="<td>Current Heavenly Chips:</td>",g+='<td class="cmValue" id="CMStatsHCCurrent"></td>',g+="</tr>",g+="<tr>",g+="<td>Heavenly Chips after reset:</td>",g+='<td class="cmValue" id="CMStatsHCMax"></td>',g+="</tr>",g+="<tr>",g+="<td>Cookies to next HC:</td>",g+='<td class="cmValue" id="CMStatsHCCookiesToNext"></td>',g+="</tr>",g+="<tr>",g+="<td>Time to next HC:</td>",g+='<td class="cmValue" id="CMStatsHCTimeToNext"></td>',g+="</tr>",g+="</table>",g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconWrinkler"></span>Wrinklers</th>',g+="</tr>",g+="<tr>",g+="<td>Cookies sucked by Wrinklers:</td>",g+='<td class="cmValue" id="CMStatsWrinklersSucked"></td>',g+="</tr>",g+="<tr>",g+="<td>Reward for popping Wrinklers:</td>",g+='<td class="cmValue" id="CMStatsWrinklersReward"></td>',g+="</tr>",g+="</table>",g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconMisc"></span>Miscellaneous Stats</th>',g+="</tr>",g+="<tr>",g+="<td>Base CPS:</td>",g+='<td class="cmValue" id="CMStatsBaseCPS"></td>',g+="</tr>",g+="<tr>",g+="<td>Frenzy CPS:</td>",g+='<td class="cmValue" id="CMStatsFrenzyCPS"></td>',g+="</tr>",g+="<tr>",g+="<td>Elder Frenzy CPS:</td>",g+='<td class="cmValue" id="CMStatsElderFrenzyCPS"></td>',g+="</tr>",g+="<tr>",g+="<td>Last Golden Cookie effect:</td>",g+='<td class="cmValue" id="CMStatsLastGC"></td>',g+="</tr>",g+="<tr>",g+="<td>Golden Cookies Missed:</td>",g+='<td class="cmValue" id="CMStatsMissedGC"></td>',g+="</tr>",g+="</table>",f=$(g),c.append(d,f),a.append(c),b.prepend(e),this.config.cmStatsPanel=c,this.config.cmStatsTable=f},CM.updateStats=function(){var a=this.getHCStats(),b=this.getWrinklerStats(),c=this.toTitleCase(Game.goldenCookie.last)||"None clicked this session!",d=Game.cookies>=this.luckyBank()?'<span class="cmHighlight">'+Beautify(this.luckyBank())+"</span>":Beautify(this.luckyBank()),e=Game.cookies>=this.luckyFrenzyBank()?'<span class="cmHighlight">'+Beautify(this.luckyFrenzyBank())+"</span>":Beautify(this.luckyFrenzyBank());$("#CMStatsLuckyRequired").html(d),$("#CMStatsLuckyFrenzyRequired").html(e),$("#CMStatsLuckyReward").html(Beautify(this.luckyReward())+" (max: "+Beautify(this.maxLuckyReward())+")"),$("#CMStatsLuckyFrenzyReward").html(Beautify(this.luckyFrenzyReward())+" (max: "+Beautify(this.maxLuckyFrenzyReward())+")"),$("#CMStatsHCCurrent").html(a[0]+" ("+a[1]+")"),$("#CMStatsHCMax").html(a[2]+" ("+a[3]+")"),$("#CMStatsHCCookiesToNext").html(a[4]),$("#CMStatsHCTimeToNext").html(a[5]),$("#CMStatsWrinklersSucked").html(b[0]),$("#CMStatsWrinklersReward").html(b[1]),$("#CMStatsBaseCPS").html(Beautify(this.baseCps())),$("#CMStatsFrenzyCPS").html(Beautify(7*Game.cookiesPs)),$("#CMStatsElderFrenzyCPS").html(Beautify(666*Game.cookiesPs)),$("#CMStatsLastGC").html(c),$("#CMStatsMissedGC").html(Beautify(Game.missedGoldenClicks))},CM.attachTimerPanel=function(){{var a=$("<div />").attr({id:"CMTimerPanel","class":"cmFont"}),b=this.config.ccSectionLeft;this.config.cmTimerResolution}0===$("#CMTimerPanel").length&&(this.gcTimer=new CM.Timer("goldenCookie","Next Cookie:"),this.reindeerTimer=new CM.Timer("reindeer","Next Reindeer:"),this.frenzyTimer=new CM.Timer("frenzy","Frenzy:"),this.clickFrenzyTimer=new CM.Timer("clickFrenzy","Click Frenzy:"),this.elderFrenzyTimer=new CM.Timer("elderFrenzy","Elder Frenzy:"),this.clotTimer=new CM.Timer("clot","Clot:"),a.append(this.gcTimer.create(),this.reindeerTimer.create(),this.frenzyTimer.create(),this.elderFrenzyTimer.create(),this.clotTimer.create(),this.clickFrenzyTimer.create()),b.append(a),this.config.cmTimerPanel=a,this.displayGCTimer())},CM.removeTimerPanel=function(){$("#CMTimerPanel").length&&(this.gcTimer=null,this.reindeerTimer=null,this.frenzyTimer=null,this.clickFrenzyTimer=null,this.elderFrenzyTimer=null,this.clotTimer=null,this.config.cmGCOverlay.remove(),this.config.cmTimerPanel.remove())},CM.updateTimers=function(){this.displayGCTimer(),$("#goldenCookie").is(":hidden")?(this.gcTimer.update(),this.gcTimer.show()):this.gcTimer.hide(),$("#seasonPopup").is(":hidden")?(this.reindeerTimer.update(),this.reindeerTimer.show()):this.reindeerTimer.hide(),Game.frenzy>0&&7===Game.frenzyPower?(this.frenzyTimer.update(),this.frenzyTimer.show(),this.elderFrenzyTimer.hide(),this.clotTimer.hide()):this.frenzyTimer.hide(),Game.clickFrenzy>0?(this.clickFrenzyTimer.update(),this.clickFrenzyTimer.show()):this.clickFrenzyTimer.hide(),Game.frenzy>0&&666===Game.frenzyPower?(this.elderFrenzyTimer.update(),this.elderFrenzyTimer.show(),this.frenzyTimer.hide(),this.clotTimer.hide()):this.elderFrenzyTimer.hide(),Game.frenzy>0&&.5===Game.frenzyPower?(this.clotTimer.update(),this.clotTimer.show(),this.frenzyTimer.hide(),this.elderFrenzyTimer.hide()):this.clotTimer.hide()},CM.displayGCTimer=function(){var a=this.config.ccGoldenCookie,b=this.config.cmGCOverlay||$("<div />").attr({id:"CMGCOverlay","class":"cmFont"}),c=Math.round(Game.goldenCookie.life/Game.fps);0===$("#CMGCOverlay").length&&(this.config.ccGame.append(b),this.config.cmGCOverlay=b,this.config.cmGCOverlay.click(function(){Game.goldenCookie.click(),$("#CMGCOverlay").hide()})),a.is(":visible")?b.css({top:a.css("top"),left:a.css("left"),opacity:a.css("opacity")}).text(c).show():b.hide()},CM.showVisualAlerts=function(){var a=this.config.cmOverlay||$("<div />").attr("id","CMOverlay"),b=this.config.ccBody,c=this.config.ccGoldenCookie,d=this.config.ccSeasonPopup,e=this.config.cmVisualGCNotified,f=this.config.cmVisualSPNotified,g=this.config.settings.visualAlerts.current;0===$("#CMOverlay").length&&(b.append(a),this.config.cmOverlay=a),("gc"===g||"all"===g)&&(c.is(":visible")?e||(a.show().fadeOut(500),this.config.cmVisualGCNotified=!0):this.config.cmVisualGCNotified=!1),("sp"===g||"all"===g)&&(d.is(":visible")?f||(a.show().fadeOut(500),this.config.cmVisualSPNotified=!0):this.config.cmVisualSPNotified=!1)},CM.removeVisualAlerts=function(){this.config.cmVisualGCNotified=!1,this.config.cmVisualSPNotified=!1,$("#CMOverlay").remove()},CM.playAudioAlerts=function(){var a=(this.config.ccBody,this.config.ccGoldenCookie),b=this.config.ccSeasonPopup,c=this.config.cmGCAudioObject,d=this.config.cmSPAudioObject,e=this.config.cmAudioGCNotified,f=this.config.cmAudioSPNotified,g=this.config.settings.audioAlerts.current;("gc"===g||"all"===g)&&(a.is(":visible")?e||(c.volume=.5,c.play(),this.config.cmAudioGCNotified=!0):this.config.cmAudioGCNotified=!1),("sp"===g||"all"===g)&&(b.is(":visible")?f||(d.volume=.2,d.play(),this.config.cmAudioSPNotified=!0):this.config.cmAudioSPNotified=!1)},CM.AddPopWrinklersButton=function(){var a=$("<button />").attr({id:"CMPopWrinklers",type:"button"}).text("Pop all Wrinklers");$("#cookieAnchor").append(a)},CM.updateTitleTicker=function(){var a=Math.round((Game.goldenCookie.maxTime-Game.goldenCookie.time)/Game.fps),b=Math.round((Game.seasonPopup.maxTime-Game.seasonPopup.time)/Game.fps),c=Game.goldenCookie.life>0?"G":a,d=Game.seasonPopup.life>0?"R":b,e=Beautify(Game.cookies);document.title=c+" | "+d+" - "+e+" cookies"},CM.cleanUI=function(a){function b(){Game.Background.canvas.width=Game.Background.canvas.parentNode.offsetWidth,Game.Background.canvas.height=Game.Background.canvas.parentNode.offsetHeight,Game.LeftBackground.canvas.width=Game.LeftBackground.canvas.parentNode.offsetWidth,Game.LeftBackground.canvas.height=Game.LeftBackground.canvas.parentNode.offsetHeight}var c="cleanUI",d=this.config.ccBody;a?d.addClass(c):d.removeClass(c),setTimeout(b,1e3)},CM.changeFont=function(a){var b=this.config.ccBody;b.removeClass("serif sansserif"),"default"!==a&&b.addClass(a)},CM.applyUserSettings=function(){var a=this.config,b=this.config.settings;this.cleanUI("on"===b.cleanUI.current),this.changeFont(b.changeFont.current),"on"===b.showTimers.current?this.attachTimerPanel():this.removeTimerPanel(),"top"===b.timerBarPosition.current?a.ccBody.addClass("cmTimerTop"):a.ccBody.removeClass("cmTimerTop"),"off"===b.visualAlerts.current&&this.removeVisualAlerts(),"on"===b.autoClick.current?(this.autoClicker&&clearInterval(this.autoClicker),this.autoClicker=setInterval(function(){Game.ClickCookie()},1e3/CM.config.settings.autoClickSpeed.current)):this.autoClicker&&clearInterval(this.autoClicker),Game.RebuildStore(),Game.RebuildUpgrades()},CM.saveUserSettings=function(){var a=this.config.settings,b=new Date,c={},d="";$.each(a,function(a){c[a]=this.current}),d=$.param(c).replace(/=/g,":").replace(/&/g,"|"),b.setFullYear(b.getFullYear()+5),document.cookie="CMSettings="+d+";expires="+b.toGMTString()+";",-1===document.cookie.indexOf("CMSettings")?this.popup("Error: Could not save settings!"):this.popup("Settings saved successfully!")},CM.loadUserSettings=function(){var a=this.config.settings,b=/(?:(?:^|.*;\s*)CMSettings\s*\=\s*([^;]*).*$)|^.*$/,c=document.cookie.replace(b,"$1"),d=[],e=[];c&&(d=c.split("|"),$.each(d,function(){e=this.split(":"),a.hasOwnProperty(e[0])&&(a[e[0]].current=e[1])}))},CM.setEvents=function(){var a=this,b=this.config.ccGame,c=this.config.cmStatsPanel,d=this.config.cmSettingsPanel,e=this.config.ccSectionLeft;$("#statsButton, #prefsButton, #logButton").click(function(){$("#rows").show(),$("#CMStatsPanel, #CMSettingsPanel").hide()}),$("#CMStatsPanelButton").click(function(){c.is(":hidden")?(c.show(),d.hide(),$("#rows").hide(),b.addClass("onCMMenu")):(c.hide(),d.hide(),$("#rows").show(),b.removeClass("onCMMenu")),$("#menu").empty(),b.removeClass("onMenu"),Game.onMenu=""}),$("#CMSettingsPanelButton").click(function(){d.is(":hidden")?(d.show(),c.hide(),$("#rows").hide(),b.addClass("onCMMenu")):(d.hide(),c.hide(),$("#rows").show(),b.removeClass("onCMMenu")),$("#menu").empty(),b.removeClass("onMenu"),Game.onMenu=""}),e.hover(function(){a.wrinklersExist()&&$("#CMPopWrinklers").fadeIn(200)},function(){$("#CMPopWrinklers").fadeOut(200)}),$("#CMPopWrinklers").click(function(){Game.CollectWrinklers(),$("#CMPopWrinklers").hide()})},CM.suicide=function(){alert("This kills the CookieMaster.")},CM.alertMessage=function(a){alert(a)},Game.Logic=new Function("",Game.Logic.toString().replace("if (Game.T%(Game.fps*2)==0) document.title=Beautify(Game.cookies)+' '+(Game.cookies==1?'cookie':'cookies')+' - Cookie Clicker';","").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Audio=function(a){return-1===a.indexOf("soundjay")?new realAudio(a):(Game.Popup("Sorry, no sounds hotlinked from soundjay.com."),this.play=function(){},void 0)},CM.init();