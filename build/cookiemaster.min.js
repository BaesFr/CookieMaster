function Beautify(a,b){var c=b||0;return CM.largeNumFormat(a,c)}var CM={};CM.config={version:"1.5.1",cmGCAudioAlertURL:"//rawgithub.com/greenc/CookieMaster/master/assets/gc.mp3",cmSPAudioAlertURL:"//rawgithub.com/greenc/CookieMaster/master/assets/sp.mp3",cmGCAudioObject:null,cmSPAudioObject:null,cmAudioGCNotified:!1,cmAudioSPNotified:!1,cmVisualGCNotified:!1,cmVisualSPNotified:!1,cmRefreshRate:1e3,cmFastRefreshRate:200,ccURL:"http://orteil.dashnet.org/cookieclicker/",ccCompatibleVersions:["1.0402","1.0403"],ccBody:$("body"),ccWrapper:$("#wrapper"),ccGame:$("#game"),ccSectionLeft:$("#sectionLeft"),ccSectionMiddle:$("#sectionMiddle"),ccSectionRight:$("#sectionRight"),ccComments:$("#comments"),ccGoldenCookie:$("#goldenCookie"),ccSeasonPopup:$("#seasonPopup"),cmTimerPanel:null,cmSettingsPanel:null,cmStatsPanel:null,cmStatsTable:null,cmOverlay:null,cmGCOverlay:null,settings:{cleanUI:{type:"checkbox",label:"Clean Interface:",desc:"Hide the top bar, and make other small graphical enhancements to the game interface.",current:"on"},showTimers:{type:"checkbox",label:"Show Timers:",desc:"Display countdown timers for game events and buffs.",current:"on"},timerBarPosition:{type:"select",label:"Timer Bar Position:",desc:"Position the timer bar at the top or bottom of the screen.",options:[{label:"Top",value:"top"},{label:"Bottom",value:"bottom"}],current:"bottom"},audioAlerts:{type:"select",label:"Audio Alerts:",desc:"Play an audio alert when Golden Cookies and Reindeer spawn.",options:[{label:"Off",value:"off"},{label:"Golden Cookie",value:"gc"},{label:"Reindeer",value:"sp"},{label:"All",value:"all"}],current:"all"},visualAlerts:{type:"select",label:"Visual Alerts:",desc:"Flash the screen when Golden Cookies and Reindeer spawn.",options:[{label:"Off",value:"off"},{label:"Golden Cookie",value:"gc"},{label:"Reindeer",value:"sp"},{label:"All",value:"all"}],current:"all"},numFormat:{type:"select",label:"Number Formatting:",desc:"Sets the desired decimal and thousands separator symbols for numbers.",options:[{label:"1,234,567.890",value:"us"},{label:"1.234.567,890",value:"eu"}],current:"us"},shortNums:{type:"checkbox",label:"Shorten Numbers:",desc:"Shorten large numbers with suffixes.",current:"on"},suffixFormat:{type:"select",label:"Suffix Type:",desc:"Notation type to use for shortened number suffixes.",options:[{label:"Mathematical",value:"math"},{label:"SI Units",value:"si"},{label:"Standard",value:"standard"}],current:"math"},precision:{type:"select",label:"Precision:",desc:"How many decimal places to show for shortened numbers.",options:[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"}],current:"3"},showEfficiencyKey:{type:"checkbox",label:"Show Efficiency Key:",desc:"Display building efficiency color key in the right panel.",current:"on"},changeFont:{type:"select",label:"Game Font:",desc:"Set the highlight font used throughout the game.",options:[{label:"Kavoon (default)",value:"default"},{label:"Serif",value:"serif"},{label:"Sans Serif",value:"sansserif"}],current:"default"},highVisibilityCookie:{type:"checkbox",label:"High Visibility Cookies:",desc:"Increase the contrast between Golden Cookies and the background.",current:"off"},increaseClickArea:{type:"checkbox",label:"Increase Cookie Hitbox:",desc:'Make the clickable area larger for Golden Cookies. Helps accuracy during chains. Requires "Show Timers" to be on.',current:"off"},autoClick:{type:"select",label:"Auto-click Big Cookie:",desc:"Automatically click the big cookie.",options:[{label:"Off",value:"off"},{label:"During Click Frenzies",value:"clickFrenzies"},{label:"All the time",value:"on"}],current:"off"},autoClickSpeed:{type:"range",label:"Auto-click Speed:",desc:"How many times per second to auto-click the big cookie.",options:{min:1,max:250,step:1},current:10}}},CM.init=function(){var a=this,b=this.config.cmRefreshRate,c=this.config.cmFastRefreshRate;return this.config.cmGCAudioObject=new Audio(this.config.cmGCAudioAlertURL),this.config.cmSPAudioObject=new Audio(this.config.cmSPAudioAlertURL),this.integrityCheck()?(this.loadUserSettings(),this.attachSettingsPanel(),this.attachStatsPanel(),this.AddPopWrinklersButton(),this.setupTooltips(),this.setEvents(),this.applyUserSettings(),Game.tooltip.draw=this.appendToNative(Game.tooltip.draw,CM.updateTooltips),Game.RebuildStore=this.appendToNative(Game.RebuildStore,CM.updateTooltips),setInterval(function(){a.mainLoop()},b),setInterval(function(){a.updateTitleTicker(),"off"!==a.config.settings.audioAlerts.current&&a.playAudioAlerts()},c),this.popup("CookieMaster v."+this.config.version+" loaded successfully!"),void 0):(this.suicide(),!1)},CM.integrityCheck=function(){var a=Game.version.toString(),b=!1;return-1===document.location.href.indexOf(this.config.ccURL)?(this.alertMessage("Error: This isn't the Cookie Clicker URL!"),b=!0):window.jQuery?Game||(this.alertMessage("Error: Cookie Clicker does not appear to be initialized!"),b=!0):(this.alertMessage("Error: jQuery is not loaded!"),b=!0),-1===this.compatibilityCheck(a)&&this.alertMessage("Warning: CookieMaster has not been tested on this version of Cookie Clicker. Continue at your own peril!"),(0===Game.seasonPopup.maxTime||0===Game.goldenCookie.maxTime)&&this.alertMessage("Warning: New or unsaved game detected.\n\nGolden cookies and reindeer will not spawn until you manually save and refresh Cookie Clicker.\n\nThis is a bug in the game, not CookieMaster ;)"),b?!1:!0},CM.compatibilityCheck=function(a){var b,c=this.config.ccCompatibleVersions;for(b=0;b<c.length;b++)if(c[b].match(a))return b;return-1},CM.largeNumFormat=function(a,b){var c,d,e="on"===this.config.settings.shortNums.current?!0:!1,f=this.config.settings.suffixFormat.current,g=this.config.settings.precision.current,h="us"===this.config.settings.numFormat.current?".":",",i="."===h?".":",",j="."===h?",":".",k=b||0,l=[{divider:1e24,suffix:{math:"Sp",si:"Y",standard:"septillion"}},{divider:1e21,suffix:{math:"Sx",si:"Z",standard:"sextillion"}},{divider:1e18,suffix:{math:"Qi",si:"E",standard:"quintillion"}},{divider:1e15,suffix:{math:"Qa",si:"P",standard:"quadrillion"}},{divider:1e12,suffix:{math:"T",si:"T",standard:"trillion"}},{divider:1e9,suffix:{math:"B",si:"G",standard:"billion"}},{divider:1e6,suffix:{math:"M",si:"M",standard:"million"}}];if(a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)return"Infinity";if(e)for(d=0;d<l.length;d++)if(a>=l[d].divider)return a=Math.floor(a/l[d].divider*Math.pow(10,g))/Math.pow(10,g)+" "+l[d].suffix[f],a.replace(".",i);return a=Math.round(a*Math.pow(10,k))/Math.pow(10,k),c=a.toString().split("."),c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,j),c.join(i)},CM.Timer=function(a,b){this.type=a,this.label=b,this.id="CMTimer-"+this.type,this.container={},this.barOuter={},this.barInner={},this.counter={},this.limiter=null,this.create=function(){var a,b=this.getTimings(),c=$("<div />").attr({"class":"cmTimerContainer cf cmTimer-"+this.type,id:this.id}),d=$("<div />").addClass("cmTimer"),e=$("<div />"),f=$("<div />").addClass("cmTimerLabel").text(this.label),g=$("<div />").addClass("cmTimerCounter").text(Math.round(b.minCurrent)),h=null,i=b.minCurrent/b.max*100;return b.hasOwnProperty("min")&&b.min>0&&(a=b.min/b.max*100,100-a>i&&c.addClass("cmEmphasize"),h=$("<span />").css("width",a+"%"),d.append(h)),e.css("width",i+"%"),d.append(e),c.append(f,d,g),this.container=c,this.barOuter=d,this.barInner=e,this.counter=g,this.limiter=h,c},this.update=function(){var a,b=this.limiter,c=this.barOuter,d=this.getTimings(),e=d.minCurrent/d.max*100;return d.hasOwnProperty("min")&&d.min&&(this.limiter||(b=$("<span />"),c.append(b),this.limiter=b),a=d.min/d.max*100,this.limiter.css("width",a+"%"),100-a>e?(this.limiter.fadeOut(500),this.container.addClass("cmEmphasize")):(this.limiter.show(),this.container.removeClass("cmEmphasize"))),this.barInner.css("width",e+"%"),this.counter.text(Math.round(d.minCurrent)),this},this.getTimings=function(){var a={},b=Game.Has("Get lucky");return"reindeer"===this.type?(a.min=Game.seasonPopup.minTime/Game.fps,a.minCurrent=(Game.seasonPopup.maxTime-Game.seasonPopup.time)/Game.fps,a.max=Game.seasonPopup.maxTime/Game.fps):"goldenCookie"===this.type?(a.min=Game.goldenCookie.minTime/Game.fps,a.minCurrent=(Game.goldenCookie.maxTime-Game.goldenCookie.time)/Game.fps,a.max=Game.goldenCookie.maxTime/Game.fps):"frenzy"===this.type?(a.minCurrent=Game.frenzy/Game.fps,a.max=77+77*b):"clickFrenzy"===this.type?(a.minCurrent=Game.clickFrenzy/Game.fps,a.max=13+13*b):"elderFrenzy"===this.type?(a.minCurrent=Game.frenzy/Game.fps,a.max=6+6*b):"clot"===this.type&&(a.minCurrent=Game.frenzy/Game.fps,a.max=66+66*b),a},this.show=function(){if(this.container.is(":hidden")){var a=this.container.children();a.css("opacity",0),this.container.slideDown(200,function(){a.animate({opacity:1},200)})}return this},this.hide=function(){if(this.container.is(":visible")){var a=this.container;this.container.children().animate({opacity:0},200,function(){a.slideUp(200)})}return this}},CM.cookiesToHeavenly=function(a){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*a)/Math.pow(10,6)-.5)},CM.heavenlyToCookies=function(a){return 5*Math.pow(10,11)*a*(a+1)},CM.getHCStats=function(){var a=[],b=Game.prestige["Heavenly chips"],c=2*b,d=this.cookiesToHeavenly(Game.cookiesReset+Game.cookiesEarned),e=2*d,f=this.heavenlyToCookies(d+1)-(Game.cookiesReset+Game.cookiesEarned),g=Math.round(f/this.effectiveCps());return a=[Beautify(b),Beautify(c)+"%",Beautify(d),Beautify(e)+"%",Beautify(f),this.formatTime(g)]},CM.baseCps=function(){var a=Game.frenzy>0?Game.frenzyPower:1;return Game.cookiesPs/a},CM.effectiveCps=function(){var a=this.config.settings,b="on"===a.autoClick.current?a.autoClickSpeed.current*Game.mouseCps():0;return b+Game.cookiesPs},CM.baseCpc=function(){var a=Game.frenzy>0?Game.frenzyPower:1,b=Game.clickFrenzy>0?777:1;return Game.mouseCps()/a/b},CM.luckyBank=function(){return 1200*this.baseCps()*10+13},CM.luckyFrenzyBank=function(){return 1200*this.baseCps()*10*7+13},CM.maxLuckyReward=function(){return 1200*this.baseCps()+13},CM.maxLuckyFrenzyReward=function(){return 1200*this.baseCps()*7+13},CM.luckyReward=function(){return Math.min(Game.cookies/10+13,1200*this.baseCps()+13)},CM.luckyFrenzyReward=function(){return Math.min(Game.cookies/10+13,1200*this.baseCps()*7+13)},CM.maxChainReward=function(){var a=Game.cookies/4,b=60*Game.cookiesPs*60*6,c=3===Game.elderWrath?!0:!1,d=c?66666:77777;if(Game.cookiesEarned<1e5)return!1;for(;a>d&&b>=d;)d+=c?"6":"7",d=parseInt(d,10);return d.toString().slice(0,-1)},CM.requiredNextChainTier=function(a,b){var c=3===Game.elderWrath?!0:!1,d=c?"6":"7",e=c?66666:77777,f=c?666666:777777,g=e>b?f:parseInt(b+d,10);return Game.cookiesEarned<1e5?!1:"bank"===a?4*g:g/6/60/60},CM.getWrinklerStats=function(){var a=0,b=1.1;return $.each(Game.wrinklers,function(){a+=this.sucked}),[a,a*b]},CM.getReindeerReward=function(){var a=Game.Has("Ho ho ho-flavored frosting")?2:1;return Math.max(25,60*Game.cookiesPs)*a},CM.formatTime=function(a,b){var c,d=Math.round(a),e=parseInt(d/86400)%999,f=parseInt(d/3600)%24,g=parseInt(d/60)%60,h=d%60,i=[" days, "," hours, "," minutes, "," seconds"];return"undefined"==typeof b&&(b=!1),1/0===d?"Never":0===d?"Done!":d/86400>1e3?"> 1,000 days":(b?i=["d, ","h, ","m, ","s"]:(1===e&&(i[0]=" day, "),1===f&&(i[1]=" hour, "),1===g&&(i[2]=" minute, "),1===h&&(i[3]=" second")),c="",e>0&&(c+=e+i[0]),(e>0||f>0)&&(c+=f+i[1]),(e>0||f>0||g>0)&&(c+=g+i[2]),(e>0||f>0||g>0||h>0)&&(c+=h+i[3]),c)},CM.wrinklersExist=function(){var a;for(a in Game.wrinklers)if(Game.wrinklers[a].phase>0)return!0;return!1},CM.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},CM.popup=function(a){return Game.Popup('<span class="cmPopupText">'+a+"</span>")},CM.appendToNative=function(a,b){return function(){a.apply(null,arguments),b.apply(CM)}},CM.replaceCode=function(a,b){a=a.toString();for(var c in b)a=a.replace(c,b[c]);return a.replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")},CM.replaceNative=function(a,b,c){var d=Game[a];"undefined"==typeof c&&(c=""),Game[a]=new Function(c,this.replaceCode(d,b))},CM.mainLoop=function(){var a=this.config.settings;"on"===a.showTimers.current&&$("#CMTimerPanel").length&&this.updateTimers(),"off"!==a.visualAlerts.current&&this.showVisualAlerts(),this.autoClickClickFrenzies(),this.config.cmStatsPanel.is(":visible")&&this.updateStats(),CME.updateBuildingsInformations(),this.updateTooltips()},CM.attachSettingsPanel=function(){var a=this,b=[],c=[],d=[],e="",f="",g="",h=this.config.settings,i=this.config.ccSectionMiddle,j=this.config.ccComments,k=$("<div />").attr("id","CMSettingsPanel"),l=$("<div />").attr({id:"CMSettingsPanelButton","class":"button"}).text("Settings"),m=$("<h3 />").attr("class","title").html('CookieMaster Settings<span class="cmTitleSub">v.'+this.config.version+"</span>"),n=$("<table />").attr({id:"CMSettingsTable","class":"cmTable"}),o=$("<button />").attr({id:"CMSettingsSave",type:"button","class":"cmFont"}).text("Apply Settings"),p=$("<button />").attr({id:"CMSettingsPause",type:"button","class":"cmFont"}).text("Pause Game");$.each(h,function(a){c=[],e=this.current,"select"===this.type?($.each(this.options,function(){f=e===this.value.toString()?' selected="selected"':"",c.push('<option value="'+this.value+'"'+f+">"+this.label+"</option>")}),d='<select id="CMSetting-'+a+'">',d+=c.join(""),d+="</select>",n.on("change",".setting-"+a+" select",function(){h[a].current=$(this).find(":selected").val()})):"checkbox"===this.type?(f="on"===e?' checked="checked"':"",d='<input type="checkbox" id="CMSetting-'+a+'"'+f+" />",n.on("change",".setting-"+a+" input",function(){h[a].current=$(this).prop("checked")?"on":"off"})):"range"===this.type&&(d='<span class="currentValue">'+this.current+"</span>",d+='<input type="range" value="'+this.current+'" min="'+this.options.min+'" max="'+this.options.max+'" step="'+this.options.step+'" id="CMSetting-'+a+'" />',n.on("change",".setting-"+a+" input",function(){$(this).siblings(".currentValue").text($(this).val()),h[a].current=$(this).val()})),g='<tr class="setting setting-'+a+'">',g+="<td>",g+='<label for="CMSetting-'+a+'">'+this.label+"</label>",g+="<small>"+this.desc+"</small>",g+="</td>",g+='<td class="cmValue">'+d+"</td>",g+="</tr>",b.push(g)}),n.append(b.join("")),k.append(m,n,o,p),i.append(k),j.prepend(l),this.config.cmSettingsPanel=k,o.click(function(){a.saveUserSettings(),a.applyUserSettings()}),p.click(function(){alert("Game paused. Click OK to resume.")})},CM.attachStatsPanel=function(){var a=this.config.ccSectionMiddle,b=this.config.ccComments,c=$("<div />").attr("id","CMStatsPanel"),d=$("<h3 />").attr("class","title").attr("class","title").html('CookieMaster Statistics<span class="cmTitleSub">v.'+this.config.version+"</span>"),e=$("<div />").attr({id:"CMStatsPanelButton","class":"button"}).text("Stats +"),f={},g="";g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconLucky"></span>Golden Cookies</th>',g+="</tr>",g+="<tr>",g+="<td>Lucky bank required:</td>",g+='<td class="cmValue" id="CMStatsLuckyRequired"></td>',g+="</tr>",g+="<tr>",g+="<td>Lucky + Frenzy bank required:</td>",g+='<td class="cmValue" id="CMStatsLuckyFrenzyRequired"></td>',g+="</tr>",g+="<tr>",g+="<td>Lucky reward:</td>",g+='<td class="cmValue" id="CMStatsLuckyReward"></td>',g+="</tr>",g+="<tr>",g+="<td>Lucky + Frenzy reward:</td>",g+='<td class="cmValue" id="CMStatsLuckyFrenzyReward"></td>',g+="</tr>",g+="<tr>",g+="<td>Reindeer Reward:</td>",g+='<td class="cmValue" id="CMStatsReindeerReward"></td>',g+="</tr>",g+="<tr>",g+="<td>Maximum Cookie Chain reward:</td>",g+='<td class="cmValue" id="CMStatsMaxChainReward"></td>',g+="</tr>",g+="<tr>",g+="<td>Bank required for next Chain tier:</td>",g+='<td class="cmValue" id="CMStatsBankRequiredNextChainTier"></td>',g+="</tr>",g+="<tr>",g+="<td>CpS required for next Chain tier:</td>",g+='<td class="cmValue" id="CMStatsCPSRequiredNextChainTier"></td>',g+="</tr>",g+="<tr>",g+="<td>Last Golden Cookie effect:</td>",g+='<td class="cmValue" id="CMStatsLastGC"></td>',g+="</tr>",g+="<tr>",g+="<td>Golden Cookies Missed:</td>",g+='<td class="cmValue" id="CMStatsMissedGC"></td>',g+="</tr>",g+="</table>",g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconHC"></span>Prestige</th>',g+="</tr>",g+="<tr>",g+="<td>Current Heavenly Chips:</td>",g+='<td class="cmValue" id="CMStatsHCCurrent"></td>',g+="</tr>",g+="<tr>",g+="<td>Heavenly Chips after reset:</td>",g+='<td class="cmValue" id="CMStatsHCMax"></td>',g+="</tr>",g+="<tr>",g+="<td>Cookies to next HC:</td>",g+='<td class="cmValue" id="CMStatsHCCookiesToNext"></td>',g+="</tr>",g+="<tr>",g+="<td>Time to next HC:</td>",g+='<td class="cmValue" id="CMStatsHCTimeToNext"></td>',g+="</tr>",g+="</table>",g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconWrinkler"></span>Wrinklers</th>',g+="</tr>",g+="<tr>",g+="<td>Cookies sucked by Wrinklers:</td>",g+='<td class="cmValue" id="CMStatsWrinklersSucked"></td>',g+="</tr>",g+="<tr>",g+="<td>Reward for popping Wrinklers:</td>",g+='<td class="cmValue" id="CMStatsWrinklersReward"></td>',g+="</tr>",g+="</table>",g+='<table class="cmTable">',g+='<tr class="cmHeader">',g+='<th colspan="2" class="cmFont"><span class="icon cmIcon cmIconMisc"></span>Miscellaneous Stats</th>',g+="</tr>",g+="<tr>",g+="<td>Base CpS:</td>",g+='<td class="cmValue" id="CMStatsBaseCPS"></td>',g+="</tr>",g+="<tr>",g+="<td>Effective CpS:</td>",g+='<td class="cmValue" id="CMStatsEffectiveCPS"></td>',g+="</tr>",g+="<tr>",g+="<td>Frenzy CpS:</td>",g+='<td class="cmValue" id="CMStatsFrenzyCPS"></td>',g+="</tr>",g+="<tr>",g+="<td>Elder Frenzy CpS:</td>",g+='<td class="cmValue" id="CMStatsElderFrenzyCPS"></td>',g+="</tr>",g+="<tr>",g+="<td>Base CpC:</td>",g+='<td class="cmValue" id="CMStatsBaseCPC"></td>',g+="</tr>",g+="<tr>",g+="<td>Frenzy CpC:</td>",g+='<td class="cmValue" id="CMStatsFrenzyCPC"></td>',g+="</tr>",g+="<tr>",g+="<td>Click Frenzy CpC:</td>",g+='<td class="cmValue" id="CMStatsClickFrenzyCPC"></td>',g+="</tr>",g+="<tr>",g+="<td>Frenzy + Click Frenzy CpC:</td>",g+='<td class="cmValue" id="CMStatsFrenzyClickFrenzyCPC"></td>',g+="</tr>",g+="<tr>",g+='<td colspan="2"><small>CpS = Cookies per Second, CpC = Cookies per Click</small></td>',g+="</tr>",g+="</table>",f=$(g),c.append(d,f),a.append(c),b.prepend(e),this.config.cmStatsPanel=c,this.config.cmStatsTable=f},CM.attachEfficiencyKey=function(){var a,b=$("<table />").attr({id:"CMEfficiencyTable","class":"cmTable"});0===$("#CMEfficiencyTable").length&&(a+='<tr class="cmHeader">',a+='<th colspan="2" class="cmFont">Efficiency Key:</th>',a+="</tr>",a+="<tr>",a+='<td><span class="cmSample background-cyan"></span></td>',a+='<td class="cmValue">(Upgrades) This item has a better BCI than any building</td>',a+="</tr>",a+="<tr>",a+='<td><span class="cmSample background-purple"></span></td>',a+='<td class="cmValue">(Upgrades) This item has a worse BCI than any building</td>',a+="</tr>",a+="<tr>",a+='<td><span class="cmSample background-greyLight"></span></td>',a+='<td class="cmValue">(Upgrades) This item has not been calculated and/or cannot be calculated due to no definitive worth.</td>',a+="</tr>",a+="<tr>",a+='<td><span class="cmSample background-green"></span></td>',a+='<td class="cmValue">This item has the best BCI</td>',a+="</tr>",a+="<tr>",a+='<td><span class="cmSample background-yellow"></span></td>',a+='<td class="cmValue">This item is not the best, but it is closer to best than it is to worst</td>',a+="</tr>",a+="<tr>",a+='<td><span class="cmSample background-orange"></span></td>',a+='<td class="cmValue">This item is not the worst, but it is closer to worst than it is to best</td>',a+="</tr>",a+="<tr>",a+='<td><span class="cmSample background-red"></span></td>',a+='<td class="cmValue">This item has the worst BCI</td>',a+="</tr>",b.html(a),$("#store").after(b))},CM.removeEfficiencyKey=function(){$("#CMEfficiencyTable").length&&$("#CMEfficiencyTable").remove()},CM.updateStats=function(){var a,b,c=this.getHCStats(),d=this.getWrinklerStats(),e=this.toTitleCase(Game.goldenCookie.last)||"-",f=Game.cookies>=this.luckyBank()?'<span class="cmHighlight">'+Beautify(this.luckyBank())+"</span>":Beautify(this.luckyBank()),g=Game.cookies<this.luckyBank()?" ("+this.formatTime((this.luckyBank()-Game.cookies)/this.effectiveCps())+")":"",h=Game.cookies>=this.luckyFrenzyBank()?'<span class="cmHighlight">'+Beautify(this.luckyFrenzyBank())+"</span>":Beautify(this.luckyFrenzyBank()),i=Game.cookies<this.luckyFrenzyBank()?" ("+this.formatTime((this.luckyFrenzyBank()-Game.cookies)/this.effectiveCps())+")":"",j=this.maxChainReward(),k=j?Beautify(j):"Earn "+Beautify(1e5-Math.round(Game.cookiesEarned))+" more cookies for cookie chains",l=this.requiredNextChainTier("bank",j),m=this.requiredNextChainTier("cps",j);l!==!1&&(a=Game.cookies>l?'<span class="cmHighlight">'+Beautify(l)+"</span>":Beautify(l)),m!==!1&&(b=Game.cookiesPs>m?'<span class="cmHighlight">'+Beautify(m,1)+"</span>":Beautify(m,1)),$("#CMStatsLuckyRequired").html(f+g),$("#CMStatsLuckyFrenzyRequired").html(h+i),$("#CMStatsLuckyReward").html(Beautify(this.luckyReward())+" (max: "+Beautify(this.maxLuckyReward())+")"),$("#CMStatsLuckyFrenzyReward").html(Beautify(this.luckyFrenzyReward())+" (max: "+Beautify(this.maxLuckyFrenzyReward())+")"),$("#CMStatsReindeerReward").html(Beautify(this.getReindeerReward())),$("#CMStatsMaxChainReward").html(k),$("#CMStatsBankRequiredNextChainTier").html(a||"-"),$("#CMStatsCPSRequiredNextChainTier").html(b||"-"),$("#CMStatsLastGC").html(e),$("#CMStatsMissedGC").html(Beautify(Game.missedGoldenClicks)),$("#CMStatsHCCurrent").html(c[0]+" ("+c[1]+")"),$("#CMStatsHCMax").html(c[2]+" ("+c[3]+")"),$("#CMStatsHCCookiesToNext").html(c[4]),$("#CMStatsHCTimeToNext").html(c[5]),$("#CMStatsWrinklersSucked").html(Beautify(d[0])),$("#CMStatsWrinklersReward").html(Beautify(d[1])),$("#CMStatsBaseCPS").html(Beautify(this.baseCps(),1)),$("#CMStatsEffectiveCPS").html(Beautify(this.effectiveCps(),1)),$("#CMStatsFrenzyCPS").html(Beautify(7*this.baseCps(),1)),$("#CMStatsElderFrenzyCPS").html(Beautify(666*this.baseCps(),1)),$("#CMStatsBaseCPC").html(Beautify(this.baseCpc())),$("#CMStatsFrenzyCPC").html(Beautify(7*this.baseCpc())),$("#CMStatsClickFrenzyCPC").html(Beautify(777*this.baseCpc())),$("#CMStatsFrenzyClickFrenzyCPC").html(Beautify(777*this.baseCpc()*7))},CM.attachTimerPanel=function(){{var a=$("<div />").attr({id:"CMTimerPanel","class":"cmFont"}),b=this.config.ccSectionLeft;this.config.cmTimerResolution}0===$("#CMTimerPanel").length&&(this.gcTimer=new CM.Timer("goldenCookie","Next Cookie:"),this.reindeerTimer=new CM.Timer("reindeer","Next Reindeer:"),this.frenzyTimer=new CM.Timer("frenzy","Frenzy:"),this.clickFrenzyTimer=new CM.Timer("clickFrenzy","Click Frenzy:"),this.elderFrenzyTimer=new CM.Timer("elderFrenzy","Elder Frenzy:"),this.clotTimer=new CM.Timer("clot","Clot:"),a.append(this.gcTimer.create(),this.reindeerTimer.create(),this.frenzyTimer.create(),this.elderFrenzyTimer.create(),this.clotTimer.create(),this.clickFrenzyTimer.create()),b.append(a),this.config.cmTimerPanel=a,this.displayGCTimer())},CM.removeTimerPanel=function(){$("#CMTimerPanel").length&&(this.gcTimer=null,this.reindeerTimer=null,this.frenzyTimer=null,this.clickFrenzyTimer=null,this.elderFrenzyTimer=null,this.clotTimer=null,this.config.cmGCOverlay.remove(),this.config.cmTimerPanel.remove())},CM.updateTimers=function(){this.displayGCTimer(),0===Game.goldenCookie.life?(this.gcTimer.update(),this.gcTimer.show()):this.gcTimer.hide(),0===Game.seasonPopup.life?(this.reindeerTimer.update(),this.reindeerTimer.show()):this.reindeerTimer.hide(),Game.frenzy>0&&7===Game.frenzyPower?(this.frenzyTimer.update(),this.frenzyTimer.show(),this.elderFrenzyTimer.hide(),this.clotTimer.hide()):this.frenzyTimer.hide(),Game.clickFrenzy>0?(this.clickFrenzyTimer.update(),this.clickFrenzyTimer.show()):this.clickFrenzyTimer.hide(),Game.frenzy>0&&666===Game.frenzyPower?(this.elderFrenzyTimer.update(),this.elderFrenzyTimer.show(),this.frenzyTimer.hide(),this.clotTimer.hide()):this.elderFrenzyTimer.hide(),Game.frenzy>0&&.5===Game.frenzyPower?(this.clotTimer.update(),this.clotTimer.show(),this.frenzyTimer.hide(),this.elderFrenzyTimer.hide()):this.clotTimer.hide()},CM.displayGCTimer=function(){var a=this.config.ccGoldenCookie,b=this.config.cmGCOverlay||$("<div />").attr({id:"CMGCOverlay","class":"cmFont"}),c=Math.round(Game.goldenCookie.life/Game.fps);0===$("#CMGCOverlay").length&&(this.config.ccBody.append(b),this.config.cmGCOverlay=b),Game.goldenCookie.life>0?b.css({top:a.css("top"),left:a.css("left"),opacity:a.css("opacity")}).text(c).show():b.hide()},CM.showVisualAlerts=function(){var a=this.config.cmOverlay||$("<div />").attr("id","CMOverlay"),b=this.config.ccBody,c=(this.config.ccGoldenCookie,this.config.ccSeasonPopup,this.config.cmVisualGCNotified),d=this.config.cmVisualSPNotified,e=this.config.settings.visualAlerts.current;0===$("#CMOverlay").length&&(b.append(a),this.config.cmOverlay=a),("gc"===e||"all"===e)&&(Game.goldenCookie.life>0?c||(a.show().fadeOut(500),this.config.cmVisualGCNotified=!0):this.config.cmVisualGCNotified=!1),("sp"===e||"all"===e)&&(Game.seasonPopup.life>0?d||(a.show().fadeOut(500),this.config.cmVisualSPNotified=!0):this.config.cmVisualSPNotified=!1)},CM.removeVisualAlerts=function(){this.config.cmVisualGCNotified=!1,this.config.cmVisualSPNotified=!1,$("#CMOverlay").remove()},CM.playAudioAlerts=function(){var a=(this.config.ccBody,this.config.ccGoldenCookie,this.config.ccSeasonPopup,this.config.cmGCAudioObject),b=this.config.cmSPAudioObject,c=this.config.cmAudioGCNotified,d=this.config.cmAudioSPNotified,e=this.config.settings.audioAlerts.current;("gc"===e||"all"===e)&&(Game.goldenCookie.life>0?c||(a.volume=.5,a.play(),this.config.cmAudioGCNotified=!0):this.config.cmAudioGCNotified=!1),("sp"===e||"all"===e)&&(Game.seasonPopup.life>0?d||(b.volume=.2,b.play(),this.config.cmAudioSPNotified=!0):this.config.cmAudioSPNotified=!1)},CM.AddPopWrinklersButton=function(){var a=$("<button />").attr({id:"CMPopWrinklers",type:"button"}).text("Pop all Wrinklers");$("#cookieAnchor").append(a)},CM.updateTitleTicker=function(){var a=Math.round((Game.goldenCookie.maxTime-Game.goldenCookie.time)/Game.fps),b=Math.round((Game.seasonPopup.maxTime-Game.seasonPopup.time)/Game.fps),c=Game.goldenCookie.life>0?"G":a,d=Game.seasonPopup.life>0?"R":b,e=Beautify(Game.cookies);document.title=c+" | "+d+" - "+e+" cookies"},CM.autoClickClickFrenzies=function(){"clickFrenzies"===this.config.settings.autoClick.current&&(Game.clickFrenzy>0?(this.autoClicker&&clearInterval(this.autoClicker),this.autoClicker=setInterval(function(){Game.ClickCookie()},1e3/CM.config.settings.autoClickSpeed.current)):this.autoClicker&&clearInterval(this.autoClicker))},CM.preventClickBleed=function(){$("#goldenCookie").click(function(a){a.stopPropagation(),Game.goldenCookie.click()}),$("#seasonPopup").click(function(a){a.preventDefault(),a.stopPropagation(),Game.seasonPopup.click()})},CM.cleanUI=function(a){function b(){Game.Background.canvas.width=Game.Background.canvas.parentNode.offsetWidth,Game.Background.canvas.height=Game.Background.canvas.parentNode.offsetHeight,Game.LeftBackground.canvas.width=Game.LeftBackground.canvas.parentNode.offsetWidth,Game.LeftBackground.canvas.height=Game.LeftBackground.canvas.parentNode.offsetHeight}var c="cleanUI",d=this.config.ccBody;a?d.addClass(c):d.removeClass(c),setTimeout(b,1e3)},CM.changeFont=function(a){var b=this.config.ccBody;b.removeClass("serif sansserif"),"default"!==a&&b.addClass(a)},CM.applyUserSettings=function(){var a=this.config,b=this.config.settings;this.cleanUI("on"===b.cleanUI.current),this.changeFont(b.changeFont.current),"on"===b.showTimers.current?this.attachTimerPanel():this.removeTimerPanel(),"top"===b.timerBarPosition.current?a.ccBody.addClass("cmTimerTop"):a.ccBody.removeClass("cmTimerTop"),"off"===b.visualAlerts.current&&this.removeVisualAlerts(),"on"===b.showEfficiencyKey.current?this.attachEfficiencyKey():this.removeEfficiencyKey(),"on"===b.highVisibilityCookie.current?a.ccBody.addClass("cmHighVisCookie"):a.ccBody.removeClass("cmHighVisCookie"),"on"===b.increaseClickArea.current?a.ccBody.addClass("cmLargeClickArea"):a.ccBody.removeClass("cmLargeClickArea"),"on"===b.autoClick.current?(this.autoClicker&&clearInterval(this.autoClicker),this.autoClicker=setInterval(function(){Game.ClickCookie()},1e3/CM.config.settings.autoClickSpeed.current)):this.autoClicker&&clearInterval(this.autoClicker),Game.RebuildStore(),Game.RebuildUpgrades()},CM.saveUserSettings=function(){var a=this.config.settings,b=new Date,c={},d="";$.each(a,function(a){c[a]=this.current}),d=$.param(c).replace(/=/g,":").replace(/&/g,"|"),b.setFullYear(b.getFullYear()+5),document.cookie="CMSettings="+d+";expires="+b.toGMTString()+";",-1===document.cookie.indexOf("CMSettings")?this.popup("Error: Could not save settings!"):this.popup("Settings saved successfully!")},CM.loadUserSettings=function(){var a=this.config.settings,b=/(?:(?:^|.*;\s*)CMSettings\s*\=\s*([^;]*).*$)|^.*$/,c=document.cookie.replace(b,"$1"),d=[],e=[];c&&(d=c.split("|"),$.each(d,function(){e=this.split(":"),a.hasOwnProperty(e[0])&&(a[e[0]].current=e[1])}))},CM.setEvents=function(){var a=this,b=this.config.ccGame,c=this.config.cmStatsPanel,d=this.config.cmSettingsPanel,e=this.config.ccSectionLeft;$("#statsButton, #prefsButton, #logButton").click(function(){$("#rows").show(),$("#CMStatsPanel, #CMSettingsPanel").hide()}),$("#CMStatsPanelButton").click(function(){c.is(":hidden")?(a.updateStats(),c.show(),d.hide(),$("#rows").hide(),b.addClass("onCMMenu")):(c.hide(),d.hide(),$("#rows").show(),b.removeClass("onCMMenu")),$("#menu").empty(),b.removeClass("onMenu"),Game.onMenu=""}),$("#CMSettingsPanelButton").click(function(){d.is(":hidden")?(d.show(),c.hide(),$("#rows").hide(),b.addClass("onCMMenu")):(d.hide(),c.hide(),$("#rows").show(),b.removeClass("onCMMenu")),$("#menu").empty(),b.removeClass("onMenu"),Game.onMenu=""}),e.hover(function(){a.wrinklersExist()&&$("#CMPopWrinklers").fadeIn(200)},function(){$("#CMPopWrinklers").fadeOut(200)}),$("#CMPopWrinklers").click(function(){Game.CollectWrinklers(),$("#CMPopWrinklers").hide()}),this.config.ccBody.on("mousedown","#CMGCOverlay",function(){Game.goldenCookie.click(),$("#CMGCOverlay").hide()})},CM.suicide=function(){alert("This kills the CookieMaster.")},CM.alertMessage=function(a){alert(a)},CM.makeTooltip=function(a){var b=a.identifier();a.desc+='<div class="cm-tooltip__contents" id="'+b+'"></div><div class="cm-tooltip__warnings" id="'+b+'note_div"><div id="'+b+'note_div_warning" class="cmTooltipWarningLucky"><strong>Lucky deficit if purchased:</strong><br /><span id="'+b+'warning_amount"></span></div><div id="'+b+'note_div_caution" class="cmTooltipWarningLuckyFrenzy"><strong>Lucky+Frenzy deficit if purchased:</strong><br /><span id="'+b+'caution_amount"></span></div></div>',Game.RebuildUpgrades()},CM.updateTooltip=function(a,b){var c=[a.getWorth(!0),a.getBaseCostPerIncome(),a.getTimeLeft()],d=CME.getLuckyAlerts(a),e="#"+a.identifier(),f=$(e);a.matches(a.identifier())||this.makeTooltip(a),1===f.length&&"none"!==f.css("display")&&(f.attr("class","cm-tooltip__contents border-"+b[0]).html('<table class="cmTable"><tr><td>Bonus Income:</td><td class="cmValue">'+Beautify(c[0],1)+'</td></tr><tr><td>BCI:</td><td class="cmValue text-'+b[0]+'">'+Beautify(c[1],1)+'</td></tr><tr><td>Time Left:</td><td class="cmValue text-'+b[1]+'">'+CM.formatTime(c[2],!0)+"</td></tr></table>"),$(e+"warning_amount").html(Beautify(d[0])+" ("+CME.getTimeToCookies(d[0])+")"),$(e+"caution_amount").html(Beautify(d[1])+" ("+CME.getTimeToCookies(d[1])+")"),$(e+"note_div_warning").toggle(d[0]>0),$(e+"note_div_caution").toggle(d[1]>0))},CM.setupTooltips=function(){this.updateTooltips(),Game.RebuildUpgrades(),Game.RebuildStore()},CM.updateTooltips=function(a){"undefined"==typeof a&&(a="all"),("all"===a||"upgrades"===a)&&Game.UpgradesById.forEach(function(a){CM.manageUpgradeTooltips(a)
}),("all"===a||"objects"===a)&&Game.ObjectsById.forEach(function(a){CM.manageBuildingTooltip(a)})},CM.manageUpgradeTooltips=function(a){var b=a.getColors();if(CME.isInStore(a))return $("#upgrade"+Game.UpgradesInStore.indexOf(a)).html('<div class="cmUpgrade background-'+b[0]+'"></div>'),this.updateTooltip(a,b)},CM.manageBuildingTooltip=function(a){var b=a.getColors(),c=b[0];return $(".price","#product"+a.id).attr("class","price text-"+c),this.updateTooltip(a,b)},CM.replaceNative("Logic",{"if (Game.T%(Game.fps*2)==0) document.title=Beautify(Game.cookies)+' '+(Game.cookies==1?'cookie':'cookies')+' - Cookie Clicker';":""}),Audio=function(a){return-1===a.indexOf("soundjay")?new realAudio(a):(Game.Popup("Sorry, no sounds hotlinked from soundjay.com."),this.play=function(){},void 0)},CM.init();